{% extends 'base.html' %}
{% load render_table from django_tables2 %}

{% block title %}Sample Group - {{ sample_group.name }} | {{ SITE_NAME }}{% endblock %}

{% block breadcrumbs %}
    {% include 'partials/breadcrumbs.html' with breadcrumb_title=sample_group.name %}
{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="mb-0">{{ sample_group.name }}</h2>
        <a href="{% url 'profile' %}" class="btn btn-outline-secondary">Back to profile</a>
    </div>

    <div class="row g-4">
        {% for section in metadata_sections %}
            <div class="col-lg-6">
                <div class="card h-100">
                    <div class="card-body">
                        <h3 class="h5">{{ section.title }}</h3>
                        <dl class="row mb-0">
                            {% for item in section.items %}
                                <dt class="col-sm-5">{{ item.label }}</dt>
                                <dd class="col-sm-7">
                                    {% if item.type == 'email' and item.value %}
                                        <a href="mailto:{{ item.value }}">{{ item.value }}</a>
                                    {% else %}
                                        {{ item.value|default:"Not provided" }}
                                    {% endif %}
                                </dd>
                            {% endfor %}
                        </dl>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>

    <div class="card mt-4">
        <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h3 class="h5 mb-0">Allele frequencies</h3>
                <span class="text-muted">{{ variant_table.rows|length }} variants</span>
            </div>
            {% if variant_table.rows %}
                <div class="table-responsive">
                    {% render_table variant_table %}
                </div>
            {% else %}
                <p class="text-muted mb-0">No variant data has been imported for this sample group yet.</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
